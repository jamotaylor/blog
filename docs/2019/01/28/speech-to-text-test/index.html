<!DOCTYPE html>
<html lang="English">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.8.0">

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->

    

    
        <meta name="description" content="So in the process of starting this blog, I started recording some audio files while driving to and from work - the idea being to capture my thoughts a">
    

    <!--Author-->
    
        <meta name="author" content="James Newton Taylor">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Yes, sir. That&#39;s what serialization is and that&#39;s why it&#39;s such an important concept because pecans serialize an object data from one machine to another joke about a database.">
    

    <!--Open Graph Description-->
    
        <meta property="og:description" content="So in the process of starting this blog, I started recording some audio files while driving to and from work - the idea being to capture my thoughts a">
    

    <!--Open Graph Site Name-->
        <meta property="og:site_name" content="James Newton Taylor">

    <!--Type page-->
    
        <meta property="og:type" content="article">
    

    <!--Page Cover-->
    
    
        <meta property="og:image" content="https://jamotaylor.github.io/blog/img/blog_main_bg.png">
    

        <meta name="twitter:card" content="summary_large_image">

    

    
        <meta name="twitter:image" content="https://jamotaylor.github.io/blog/img/blog_main_bg.png">
    

    <!-- Title -->
    
    <title>Yes, sir. That&#39;s what serialization is and that&#39;s why it&#39;s such an important concept because pecans serialize an object data from one machine to another joke about a database. - James Newton Taylor</title>

    <!-- Bootstrap Core CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/blog/css/style.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet">

    <!-- Google Analytics -->
    


    <!-- favicon -->
    

</head>


<body>

    <!-- Menu -->
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
						<a class="navbar-brand" href="/blog/">James Newton Taylor</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <a href="/blog/">
                            
                                Home
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/archives">
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/tags">
                            
                                Tags
                            
                        </a>
                    </li>
                
                    <li>
                        <a href="/blog/categories">
                            
                                Categories
                            
                        </a>
                    </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

    <!-- Main Content -->
    <!-- Page Header -->
<!-- Set your background image for this header in your post front-matter: cover -->

<header class="intro-header" style="background-image: url('/img/blog_main_bg.png')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>Yes, sir. That's what serialization is and that's why it's such an important concept because pecans serialize an object data from one machine to another joke about a database.</h1>
                    
                    <span class="meta">
                        <!-- Date and Author -->
                        
                        
                            2019-01-28
                        
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Tags and categories -->
           
                <div class="col-lg-4 col-lg-offset-2 col-md-5 col-md-offset-1 post-tags">
                    
                        


<a href="/blog/tags/c/">#c#</a> <a href="/blog/tags/random/">#random</a>


                    
                </div>
                <div class="col-lg-4 col-md-5 post-categories">
                    
                        

<a href="/blog/categories/Dev/">Dev</a>

                    
                </div>
            

            <!-- Gallery -->
            

            <!-- Post Main Content -->
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p>So in the process of starting this blog, I started recording some audio files while driving to and from work - the idea being to capture my thoughts and ideas while they‚Äôre still fresh in my mind. </p>
<p>Then, when it came to writing my first post, I went looking for software to <strong>transcribe</strong> my recordings.  To my dismay, there was nothing free out there that could transcribe from a recorded file - only from streaming speech - as in speaking into a microphone.</p>
<h2 id="No-problem-I‚Äôm-a-programmer-I‚Äôll-make-my-own-transcriber"><a href="#No-problem-I‚Äôm-a-programmer-I‚Äôll-make-my-own-transcriber" class="headerlink" title="No problem! I‚Äôm a programmer, I‚Äôll make my own transcriber!"></a>No problem! I‚Äôm a programmer, I‚Äôll make my own transcriber!</h2><p>Of course, by <em>‚ÄúMake my own‚Äù</em>, I actually mean <em>‚ÄúGo and find someone elses code that I can use‚Äù</em>‚Ä¶</p>
<p>First hit on nuget was <a href="https://www.nuget.org/packages/Google.Cloud.Speech.V1/1.1.0-beta03" target="_blank" rel="noopener"><strong><em>Google.Cloud.Speech API</em></strong></a>.  The API is pretty amazing - so simple from the C# side. Even the authentication was easy to set up and pretty much automated.  Get the beta, because it has the <em>punctuation</em> functionality and some other cool new stuff since V1.1.</p>
<blockquote>
<p>If you wanna test the API out just for fun - head to <a href="https://cloud.google.com/speech-to-text/" target="_blank" rel="noopener">this link</a> where you can upload files and see the results.  I tested it with these sounds from <a href="https://www.soundboard.com/sb/nacho_libre_movie_quotes" target="_blank" rel="noopener">Nacho Libre</a> - works a charm! üòÅ</p>
</blockquote>
<p>If you want to skip all the cody bits, you can go straight to the <a href="#the-results"><strong>results</strong></a> of my <em>amazing</em> test.</p>
<p>To be able to use the API there are a couple of things you have to do.  I‚Äôm not running through these steps in any detail because the Google Cloud console UI is pretty easy to get around and there‚Äôs also lots of <a href="https://cloud.google.com/docs/" target="_blank" rel="noopener">good documentation</a>.</p>
<h4 id="1-Get-a-Google-Account"><a href="#1-Get-a-Google-Account" class="headerlink" title="1. Get a Google Account"></a>1. Get a Google Account</h4><h4 id="2-Start-a-Google-Cloud-free-trial"><a href="#2-Start-a-Google-Cloud-free-trial" class="headerlink" title="2. Start a Google Cloud free trial"></a>2. Start a <a href="https:\\cloud.google.com" target="_blank" rel="noopener">Google Cloud</a> free trial</h4><ul>
<li>You do have to provide Credit/Debit card details but Google swear that you won‚Äôt be charged a cent until you manually activate billing. I trust them ü§∑‚Äç</li>
</ul>
<h4 id="3-Create-a-Service-Account-in-your-Google-Cloud-Console"><a href="#3-Create-a-Service-Account-in-your-Google-Cloud-Console" class="headerlink" title="3. Create a Service Account in your Google Cloud Console"></a>3. Create a Service Account in your Google Cloud Console</h4><ul>
<li>Give yourself the <strong>owner</strong> permission level so that you can do anything you want.</li>
</ul>
<h4 id="4-Enable-the-Cloud-Speech-API"><a href="#4-Enable-the-Cloud-Speech-API" class="headerlink" title="4. Enable the Cloud.Speech API"></a>4. Enable the Cloud.Speech API</h4><h4 id="5-Add-credentials-to-the-Cloud-Speech-API"><a href="#5-Add-credentials-to-the-Cloud-Speech-API" class="headerlink" title="5. Add credentials to the Cloud.Speech API"></a>5. Add credentials to the Cloud.Speech API</h4><h4 id="6-Download-your-credentials-as-a-JSON-file"><a href="#6-Download-your-credentials-as-a-JSON-file" class="headerlink" title="6. Download your credentials as a JSON file"></a>6. Download your credentials as a JSON file</h4><h4 id="7-Create-default-credentials-on-your-machine"><a href="#7-Create-default-credentials-on-your-machine" class="headerlink" title="7. Create default credentials on your machine"></a>7. Create default credentials on your machine</h4><p>Once you have your credentials, you need to create a environment variable that‚Äôs points the the location of the JSON file which contains your keys. They do tell you how to do this on the <a href="https://cloud.google.com/docs/authentication/getting-started" target="_blank" rel="noopener">Google Cloud docs</a>, but that didn‚Äôt work for me on my Windows 10 machine.</p>
<p>Instead, hit the Start key and search for ‚Äúenvironment‚Äù - then open up the Environment Variables UI. Under the section ‚ÄúUser Variables for [user name]‚Äù click ‚ÄúNew‚Ä¶‚Äù</p>
<img src="/blog/2019/01/28/speech-to-text-test/google-cloud-enviro-window.png">
<p>Add a variable named ‚ÄúGOOGLE_APPLICATION_CREDENTIALS‚Äù then click the ‚ÄúBrowse File‚Ä¶‚Äù button and browse to the JSON file you‚Äôve just downloaded.</p>
<img src="/blog/2019/01/28/speech-to-text-test/google-cloud-enviro-new.png">
<h2 id="The-Code"><a href="#The-Code" class="headerlink" title="The Code"></a>The Code</h2><p>Now that your default credentials are loaded on your machine, you can go ahead and start writing you Unit Tests. I created a *<em>.NET Standard Class Library</em> and a <em>MSTest</em> project.  The code is really straightforward.</p>
<p>If you‚Äôre trying to do recognition on a large file like mine with more than 1 minute of audio then you will need to upload the file to your cloud storage. <a href="https://cloud.google.com/speech-to-text/quotas" target="_blank" rel="noopener">Read this</a> for the allowed quotas, especially the line: <em>‚ÄúAudio longer than ~1 minute must use the uri field to reference an audio file in Google Cloud Storage.‚Äù</em></p>
<p>As you can see in the code below, I had to use the <em>LongRunningRecognize</em> method because of the file length, and I‚Äôm using the <em>FromStorageUri</em> method to retrieve the file from my cloud storage.</p>
<p>Notice the <em>EnableAutomaticPunctuation</em> property in the <em>RecognitionConfig</em> is set <em>true</em> - as mentioned before, this is only available in the beta.</p>
<p>Now you have to match your audio file type to the <em>RecognitionConfig.Encoding</em> type, and there are only <a href="https://cloud.google.com/speech-to-text/docs/encoding" target="_blank" rel="noopener">some formats</a> that the API supports.  I chose .flac basically because it‚Äôs first on the list.</p>
<p>I used <a href="https://audio.online-convert.com/convert-to-flac" target="_blank" rel="noopener">this service</a> to convert my MP3 to Flac and it worked really well.</p>
<img src="/blog/2019/01/28/speech-to-text-test/convert-flac.png">
<p>Use the <em>Change the bit resolution</em> to set the bitrate to something compatible - either 16 or 24 bit. I have no idea what the sampling rate is for so I just chose 16000 Hz. Also, the API seems to only work with <em>mono</em> audio - so use the <em>Change audio channels</em> option there too.</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> Google.Cloud.Speech.V1;</span><br><span class="line"><span class="keyword">using</span> Google.LongRunning;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">static</span> Google.Cloud.Speech.V1.RecognitionConfig.Types;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">SpeechRecordingToText</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SpeechToTextTest</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">LongSpeechRecognitionTest</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      <span class="keyword">var</span> audio = RecognitionAudio.FromStorageUri(<span class="string">"gs://jnt-dev-speech-to-text/what is programming 2.flac"</span>);</span><br><span class="line"></span><br><span class="line">      SpeechClient client = SpeechClient.Create();</span><br><span class="line">      RecognitionConfig config = <span class="keyword">new</span> RecognitionConfig</span><br><span class="line">      &#123;</span><br><span class="line">        Encoding = AudioEncoding.Flac,</span><br><span class="line">        SampleRateHertz = <span class="number">16000</span>,</span><br><span class="line">        LanguageCode = LanguageCodes.English.UnitedStates,</span><br><span class="line">        EnableAutomaticPunctuation = <span class="literal">true</span>,</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> operation = client.LongRunningRecognize(config, audio);</span><br><span class="line"></span><br><span class="line">      operation = operation.PollUntilCompleted();</span><br><span class="line"></span><br><span class="line">      LongRunningRecognizeResponse response = operation.Result;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">      <span class="keyword">foreach</span> (<span class="keyword">var</span> r <span class="keyword">in</span> response.Results)</span><br><span class="line">      &#123;</span><br><span class="line">        sb.Append(r.Alternatives[<span class="number">0</span>].Transcript);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> sb.ToString();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Unit-Test"><a href="#Unit-Test" class="headerlink" title="Unit Test"></a>Unit Test</h4><p><strong>Make sure you that are running your unit tests (or IDE) as the user that you loaded the Environment Variable for, otherwise the automatic credentials won‚Äôt work.</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> Microsoft.VisualStudio.TestTools.UnitTesting;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">Tests_SpeechToText</span></span><br><span class="line">&#123;</span><br><span class="line">  [<span class="meta">TestClass</span>]</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UnitTest1</span></span><br><span class="line">  &#123;</span><br><span class="line">    [<span class="meta">TestMethod</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TestMethod2</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">      Console.WriteLine(<span class="keyword">new</span> SpeechRecordingToText.SpeechToTextTest().LongSpeechRecognitionTest());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="The-Results"><a href="#The-Results" class="headerlink" title="The Results"></a>The Results</h2><p>The results were‚Ä¶ well‚Ä¶ not my best work‚Ä¶ it reads like the system log from Douglas Adams‚Äô <a href="https://hitchhikers.fandom.com/wiki/Infinite_Improbability_Drive" target="_blank" rel="noopener">Infinite Improbability Drive</a>:</p>
<blockquote>
<p>Okay where we were with object-oriented sterilization? Richard knows how to do because somebody is being very active and looking a bunch of codes. Reliable Parts of tick I‚Äôm not text with you have would have the the name of my objects and then the name of the different properties of math and the value. So you have every sort of of sterilization is broken down into That things can have a name an event. And then you can have a raised you can have collections of me. So if you would take that that‚Äôs and you would converted into that she realized text and then the Peugeot I‚Äôm sending it to my friends program engine, which is considered as an object in that language. Where‚Äôs my pregnant? in the programming languages, but they are just in the world of the okay. Yes, sir. That‚Äôs what serialization is and that‚Äôs why it‚Äôs such an important concept because pecans serialize an object data from one machine to another joke about a database. It‚Äôs a fairly similar will be used to seeing fall of data stored on. On your computer on your desktop simplest form of dates that you can really look at windows. all the equivalent in Mac You‚Äôll see the file extension. Txt. And you got some inside. What do bestie done GIF created a Text document that contains Unicode characters, which is that mapping. I was talking about earlier and each one of those characters is coming in 56. So 10 words would be one box. I-10 code four cases of be about 1 bucks best and that‚Äôs a simple fall so you can that is called that is how it is stored in a file and it‚Äôs cold and encoding to tell that day too hot. ohashi written and read in most cases it will be difficult to answer Unicode characters in a text file and now you can imagine that‚Äôs if I‚Äôve got a Word document when you open a Word document, that‚Äôs because Microsoft Word Is there any how to open that kind of file She tried to open a Word document. with a notepad Doesn‚Äôt know how to read a Word document. So you going to see a whole bunch of crazy characters that is trying to trying to convert binary data to text and it‚Äôs saying what does value to text. It‚Äôs out of the range of values that I‚Äôm expecting and so I‚Äôm just going to put this blockia. character use files full everything Play in memory on your hard drive. Quiznos the five star I‚Äôm all it does is read that file from beginning to end and that‚Äôs how you end up with Violin Memory. Databases you might have heard of file to sterilize everything to so much more efficient in SQL Server. It breaks the dead up into very efficient little Cloud Supreme them together. That‚Äôs basically like its own file system. and time is it? Can I get a full tank but just the first pick? Nike what the fastest what‚Äôs the what‚Äôs the difference? What‚Äôs the where‚Äôs the process? Okay. Okay, it‚Äôs not a big difference. But if you just a fish stick images, it‚Äôs not my car.</p>
</blockquote>
<p>At least it was fun.  Looks like I‚Äôll just have to transcribe all those notes myself‚Ä¶  </p>
<p>Hey, on the plus side - this is kinda why we start with Unit Tests right?</p>
<p>It amazes me how easy to integrate this whole API was - and maybe I‚Äôll get a chance to come back to this sometime and play around some more‚Ä¶ I‚Äôve still got $300 to spend this year!</p>


                
            </div>

            <!-- Comments -->
            
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    


                </div>
            
        </div>
    </div>
</article>

    <!-- Footer -->
    <hr>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    

                    

                    
                        <li>
                            <a href="https://github.com/klugjo/hexo-theme-clean-blog" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    

                    

                    

                    
                </ul>
                <p class="copyright text-muted">&copy; 2019 James Newton Taylor<br></p>
                <p class="copyright text-muted">Original Theme <a target="_blank" href="http://startbootstrap.com/template-overviews/clean-blog/">Clean Blog</a> from <a href="http://startbootstrap.com/" target="_blank">Start Bootstrap</a></p>
                <p class="copyright text-muted">Adapted for <a target="_blank" href="https://hexo.io/">Hexo</a> by <a href="http://www.codeblocq.com/" target="_blank">Jonathan Klughertz</a></p>
            </div>
        </div>
    </div>
</footer>


    <!-- After footer scripts -->
    
<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Disqus Comments -->



</body>

</html>